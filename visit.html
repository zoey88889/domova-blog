<!-- test.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ğŸŒ¸ </title>
</head>
<body>
  <h1>ğŸ’Œ æ¬¢è¿é¢„çº¦æˆ–å’¨è¯¢</h1>

<<form name="booking" method="POST" data-netlify="true" action="thank-you.html">
  <h2>é¢„çº¦çœ‹æˆ¿</h2>

  <label>ğŸ‘¤ å§“å / Name</label>
  <input type="text" name="name" placeholder="è¯·è¾“å…¥æ‚¨çš„å§“å" required>

  <label>ğŸ“ è”ç³»ç”µè¯ / Phone</label>
  <input type="tel" name="phone" placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç " required>

  <label>ğŸ“§ ç”µå­é‚®ç®± / Email</label>
  <input type="email" name="email" placeholder="è¯·è¾“å…¥é‚®ç®±" required>

  <label>ğŸ  æ„Ÿå…´è¶£çš„æˆ¿æº / Property of Interest</label>
  <input type="text" name="property" placeholder="å¦‚ï¼š53W53 Penthouse æˆ– One High Line APT 25A">

  <label>ğŸ“… é¢„çº¦æ—¥æœŸ / Preferred Date</label>
  <input type="date" name="date">

  <label>â° é¢„çº¦æ—¶é—´ / Preferred Time</label>
  <input type="time" name="time">


  <label>ğŸ“ å…¶ä»–å¤‡æ³¨ / Notes</label>
  <textarea name="message" placeholder="å¦‚æœ‰å…¶ä»–éœ€æ±‚æˆ–çœ‹æˆ¿åå¥½å¯åœ¨æ­¤å¤‡æ³¨"></textarea>

  <!-- âœ… éšè—å­—æ®µï¼šè®°å½•æäº¤æ—¶é—´å’Œ ISO booking æ—¶é—´ -->
  <input type="hidden" name="submitted_at" id="submitted_at">
  <input type="hidden" name="booking_time_iso" id="booking_time_iso">

  <button type="submit">æäº¤é¢„çº¦ / Submit</button>
</form>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form[name='booking']");
    const submittedAt = document.getElementById("submitted_at");
    const bookingISO = document.getElementById("booking_time_iso");

    form.addEventListener("submit", function () {
      // å½“å‰æ—¶é—´æˆ³
      const now = new Date().toLocaleString("en-US", { timeZone: "America/New_York" });
      submittedAt.value = now;

      // è·å–ç”¨æˆ·å¡«å†™çš„æ—¥æœŸå’Œæ—¶é—´
      const date = form.querySelector('input[name="date"]').value;
      const time = form.querySelector('input[name="time"]').value;

      if (date && time) {
        // æ„å»º ISO æ—¶é—´æ ¼å¼ï¼Œå‡è®¾çº½çº¦æ—¶é—´ä¸º -05:00
        const isoString = `${date}T${time}:00-05:00`;
        bookingISO.value = isoString;
      }
    });
  });
</script>
  

<div id="footer"></div>
<script>
  fetch("/components/footer.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("footer").innerHTML = html;
    });
</script>

</body>
</html>